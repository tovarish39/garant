# # —Å–æ–æ–±—â–µ–Ω–∏—è –±–æ—Ç–∞
B_choose_language       = "–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫ / Choose language"
B_choose_action         = {Ru=>'–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ –∏–∑ –º–µ–Ω—é',              En=>'Choose action in menu'}
B_await_username_or_id  = {
  Ru=>'–û—Ç–ø—Ä–∞–≤—å—Ç–µ username –∏–ª–∏ id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑ —Å–ø–∏—Å–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤, –Ω–∞–∂–∞–≤ –Ω–∞ –∫–Ω–æ–ø–∫—É',
  En=>'Send username or user id or select from the contact list by clicking on the button'
}
B_userTo_not_found      = {Ru=>'–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω',                 En=>'User not found'}
B_userTo_not_subscr     = {Ru=>"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø–æ–¥–ø–∏—Å–∞–Ω –Ω–∞ –±–æ—Ç–∞",       En=>"The user is not subscribed to the bot"}
B_userTo_comments       = {Ru=>'–û—Ç–∑—ã–≤—ã –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ',                  En=>'Users comments'}
B_disputes_by_userTo     = {Ru=>'–°–ø–æ—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è',                     En=>'Users disputes'}
B_choose_role           = {Ru=>'–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å',                          En=>'Choose role'}
B_currency_types        = {Ru=>'–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞–ª—é—Ç—É —Å–¥–µ–ª–∫–∏',                 En=>'Choose currency type'}
B_push_amount_currency  = {Ru=>'–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É —Å–¥–µ–ª–∫–∏ –≤',                 En=>'Enter the transaction amount in'}
B_push_conditions       = {Ru=>'–í–≤–µ–¥–∏—Ç–µ —É—Å–ª–æ–≤–∏—è —Å–¥–µ–ª–∫–∏',                 En=>'Enter deal conditions'}
B_invalid_amount        = {Ru=>'–ù–µ –≤–∞–ª–∏–¥–Ω–æ–µ —á–∏—Å–ª–æ',                      En=>'Invalid amount'}
B_reject_deal_self      = {Ru=>'–í—ã –æ—Ç–º–µ–Ω–∏–ª–∏ —Å–¥–µ–ª–∫—É',                     En=>'You canceled the deal'}
B_info                  = {Ru=>'–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ',               En=>'User information'}
B_couse_disput          = {Ru=>'–£–∫–∞–∂–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É —Å–ø–æ—Ä–∞',                  En=>'Specify the reason for the dispute'}
B_opened_disput         = {Ru=>'–û—Ç–∫—Ä—ã—Ç —Å–ø–æ—Ä',                            En=>'Dispute opened'}
B_request               = {Ru=>'–ó–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω',                       En=>'Request has been sent'}

B_user               = {Ru=>"üë§–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:",          En=>"üë§User:"}
B_first_name         = {Ru=>"–ò–º—è:",                     En=>"First name:"}
B_last_name          = {Ru=>"–§–∞–º–∏–ª–∏—è:",                 En=>"Last name:"}
B_username           = {Ru=>"username:",                En=>"username:"}
B_user_id            = {Ru=>"id:",                      En=>"id:"}
B_deals_how_seller   = {Ru=>"üìà–°–¥–µ–ª–æ–∫ –∫–∞–∫ –ø—Ä–æ–¥–∞–≤–µ—Ü:",   En=>"üìàDeals how seller:"}
B_deals_how_custumer = {Ru=>"üìâ–°–¥–µ–ª–æ–∫ –∫–∞–∫ –ø–æ–∫—É–ø–∞—Ç–µ–ª—å:", En=>"üìâDeals how custumer:"}
B_dusputs            = {Ru=>"‚öñÔ∏è–°–ø–æ—Ä—ã:",                  En=>"‚öñÔ∏èDusputs:"}
B_comments           = {Ru=>"üì¨–û—Ç–∑—ã–≤—ã:",                En=>"üì¨Comments:"}
B_rating             = {Ru=>"‚≠êÔ∏è–†–µ–π—Ç–∏–Ω–≥:",               En=>"‚≠êÔ∏èRating:"}
B_with_seller        = {Ru=>" —Å üë§–ü—Ä–æ–¥–∞–≤—Ü–æ–º:",          En=>" with üë§Seller:"}
B_with_custumer      = {Ru=>" —Å üë§–ü–æ–∫—É–ø–∞—Ç–µ–ª–µ–º:",        En=>" with üë§Custumer:"}
B_conditions         = {Ru=>"–£—Å–ª–æ–≤–∏—è —Å–¥–µ–ª–∫–∏:",          En=>"Conditions:"}
B_amount_deal        = {Ru=>"C—É–º–º–∞ —Å–¥–µ–ª–∫–∏:",            En=>"Amount:"}
B_comission          = {Ru=>"–ö–æ–º–∏—Å—Å–∏—è –≥–∞—Ä–∞–Ω—Ç–∞:",        En=>"Comission:"}
B_amount_result      = {Ru=>"–°—É–º–º–∞ –∫ –æ–ø–ª–∞—Ç–µ:",          En=>"Result amount:"}
B_offer              = {Ru=>"–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ",              En=>"Offer"}
B_from               = {Ru=>"–æ—Ç",                       En=>"from"}
B_to_buy             = {Ru=>"–ø–æ–∫—É–ø–∫–∏",                  En=>"to buy"}
B_to_sell            = {Ru=>"–ø—Ä–æ–¥–∞–∂–∏",                  En=>"to sell"}
B_deal               = {Ru=>"–°–¥–µ–ª–∫–∞ ",                  En=>"Deal "}
B_reject_deal        = {Ru=>"–û—Ç–∫–ª–æ–Ω–∏–ª —Å–¥–µ–ª–∫—É",          En=>"Reject deal"}
B_custumer           = {Ru=>"–ü–æ–∫—É–ø–∞—Ç–µ–ª—å",               En=>"Custumer"}
B_seller             = {Ru=>"–ü—Ä–æ–¥–∞–≤–µ—Ü",                 En=>"Seller"}
B_accessed           = {Ru=>"–ø—Ä–∏–Ω—è–ª —Å–¥–µ–ª–∫—É ‚Ññ",          En=>"accessed deal ‚Ññ"}
B_accessed_by_seller = {
  Ru=>"–ü—Ä–∏–Ω—è–ª —Å–¥–µ–ª–∫—É, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å, –ø–µ—Ä–µ–¥–∞–π—Ç–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ –Ω–∞ —Ö—Ä–∞–Ω–∏–Ω–∏–µ –≥–∞—Ä–∞–Ω—Ç—É",          
  En=>"Accepted the deal, to continue, transfer the funds for safekeeping to the guarant"
}
B_opened_by          = {Ru=>"–°–ø–æ—Ä –æ—Ç–∫—Ä—ã—Ç",              En=>"Dispute opened by"} 
B_by_seller          = {Ru=>"–ü—Ä–æ–¥–∞–≤—Ü–æ–º",                En=>"Seller"} 
B_by_custumer        = {Ru=>"–ü–æ–∫—É–ø–∞—Ç–µ–ª–µ–º",              En=>"Custumer"} 
B_pending_userTo     = {Ru=>"–í –æ–∂–∏–¥–∞–Ω–∏–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è...", En=>"Pending confirmation..."}
B_leads              = {Ru=>"–≤–µ–¥—ë—Ç",                    En=>"leeds"}
B_canceled_by_seller = {
  Ru=>"–°–¥–µ–ª–∫–∞ –±—ã–ª–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞ –ü—Ä–æ–¥–∞–≤—Ü–æ–º, —Å—Ä–µ–¥—Å—Ç–≤–∞ –≤–æ–∑–≤—Ä–∞—â–µ–Ω—ã –ü–æ–∫—É–ø–∞—Ç–µ–ª—é",
  En=>"The deal was canceled by the Seller, the funds were returned to the Custumer"
}
B_finished_by_custumer = {
  Ru=>"–°–¥–µ–ª–∫–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –ü–æ–∫—É–ø–∞—Ç–µ–ª–µ–º, —Å—Ä–µ–¥—Å—Ç–≤–∞ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –ü—Ä–æ–¥–∞–≤—Ü—É",
  En=>"The deal was successfully completed by the Custumer, the funds were transferred to the Seller"
}
B_finished_by_moderator = ->{
  return "–°–¥–µ–ª–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–º @#{$moderators_username} \n –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π \n #{$comment_by_moderator}" if $lg == Ru
  return "The deal was completed by the moderator @#{$moderators_username} \n –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π \n #{$comment_by_moderator}" if $lg == En
}
B_rejected_by_seller   = {Ru=>"–û—Ç–∫–ª–æ–Ω–µ–Ω–∞ –ü—Ä–æ–¥–∞–≤—Ü–æ–º",   En=>'Rejected by seller'}
B_rejected_by_custumer = {Ru=>"–û—Ç–∫–ª–æ–Ω–µ–Ω–∞ –ü–æ–∫—É–ø–∞—Ç–µ–ª–µ–º", En=>'Rejected by custumer'}
B_funds_to_seller      = {Ru=>" –°—Ä–µ–¥—Å—Ç–≤–∞ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –Ω–∞ —Å—á—ë—Ç –ü—Ä–æ–¥–∞–≤—Ü–∞",   En=>' Funds transferred to the Seller`s account'}
B_funds_to_custumer    = {Ru=>" –°—Ä–µ–¥—Å—Ç–≤–∞ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –Ω–∞ —Å—á—ë—Ç –ü–æ–∫—É–ø–∞—Ç–µ–ª—è", En=>' Funds transferred to the Custumer`s account'}
B_funds_to_garant      = {Ru=>" –°—Ä–µ–¥—Å—Ç–≤–∞ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –Ω–∞ —Å—á—ë—Ç –ì–∞—Ä–∞–Ω—Ç–∞", En=>' Funds transferred to the Garant`s account'}
B_finished_by_admin    = {Ru=>"–ó–∞–≤–µ—Ä—à–µ–Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º", En=>'Finished by administrator'}
B_canceled_by_admin    = {Ru=>"–û—Ç–º–µ–Ω–µ–Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º",  En=>'Canceled by administrator'}
B_by_admin_win_garant  = {Ru=>"–û—Ç–º–µ–Ω–µ–Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –≤ –ø–æ–ª—å–∑—É –≥–∞—Ä–∞–Ω—Ç–∞",  En=>'Canceled by the administrator in favor of the garant'}
###########################################
# ~~~~~~~~~~~~~~~~~~~~~~
B_user_info = ->(user){
  text = ""
  text << "<b>#{B_first_name[$lg]}</b> #{user.first_name } \n" if user.first_name != '-'
  text << "<b>#{B_last_name[$lg] }</b> #{user.last_name  } \n" if user.last_name  != '-'
  text << "<b>#{B_username[$lg]  }</b> @#{user.username  } \n" if user.username   != '-'
  text << "<b>#{B_user_id[$lg]   }</b> #{user.telegram_id} \n"
}
# ~~~~~~~~~~~~~~~~~~~~~~
B_deal_info = ->(deal){
%{<b>#{B_conditions[$lg]}</b>
#{deal.conditions}
#{B_amount_deal[$lg]  } <b>#{deal.amount} #{deal.currency}</b>
#{B_comission[$lg]    } <b>999</b>
#{B_amount_result[$lg]} <b>999</b>}}

B_deal_hash =->{"##{$deal.hash_name}"}

B_deal_status = ->{
# == nil 
# =~ /rejected/ 
# =~ /accessed/ 
# =~ /payed 
# =~ /dispute 
# == 'finished by_seller' 
# == 'finished by_custumer' 
# == 'finished by_moderator'   

# == 'finished by_administrator' 
# == 'canceled by_administrator',
# == 'garant win by_administrator'
  status   = $deal.status
  disputes = $deal.disputes
  if !disputes.empty?
    dispute       = disputes.first 
    # puts dispute.inspect
    # puts $deal.inspect
    initiator_id  = dispute.created_by_user_id
    is_in_process = dispute.status == 'in_process'
    created_by    = B_by_seller[$lg]   if $deal.seller_id.to_s   == initiator_id 
    created_by    = B_by_custumer[$lg] if $deal.custumer_id.to_s == initiator_id  
  end
  case 
  when status.nil?                       # "–ó–∞–ø—Ä–æ—Å—ã"
    B_pending_userTo[$lg]
  when status =~ /accessed/              # "–ó–∞–ø—Ä–æ—Å—ã"
    B_pending_userTo[$lg]
  when status =~ /payed/                 # '–ê–∫—Ç–∏–≤–Ω—ã–µ'
  when status =~ /dispute/               # "–°–ø–æ—Ä—ã"
    B_opened_by[$lg] + created_by + "#{(is_in_process ? "\n #{B_leads[$lg]} @#{dispute.moderator.username}" : '' )}"
  when status == 'canceled by_seller'    # "–ò—Å—Ç–æ—Ä–∏—è —Å–¥–µ–ª–æ–∫"
    B_canceled_by_seller[$lg]
  when status == 'finished by_custumer'  # "–ò—Å—Ç–æ—Ä–∏—è —Å–¥–µ–ª–æ–∫"
    B_finished_by_custumer[$lg]
  when status == 'finished by_moderator' # "–ò—Å—Ç–æ—Ä–∏—è —Å–¥–µ–ª–æ–∫"
    B_finished_by_moderator.call# + B_funds_to_custumer[$lg]
  when status == 'rejected by_seller' # "–ò—Å—Ç–æ—Ä–∏—è —Å–¥–µ–ª–æ–∫"
    B_rejected_by_seller[$lg]
  when status == 'rejected by_custumer' # "–ò—Å—Ç–æ—Ä–∏—è —Å–¥–µ–ª–æ–∫"
    B_rejected_by_custumer[$lg]
  when status == 'finished by_administrator' # "–ó–∞–≤–µ—Ä—à–µ–Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º"
    B_finished_by_admin[$lg] + "\n" + $comment_by_administrator + "\n" + B_funds_to_seller[$lg]
  when status == 'canceled by_administrator' # "–û—Ç–º–µ–Ω–µ–Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º"
    B_canceled_by_admin[$lg] + "\n" + $comment_by_administrator + "\n" + B_funds_to_custumer[$lg]
  when status == 'garant win by_administrator' # "–≤ –ø–æ–ª—å–∑—É –≥–∞—Ä–∞–Ω—Ç–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º"
    B_by_admin_win_garant[$lg] + "\n" + $comment_by_administrator + "\n" + B_funds_to_garant[$lg]
  end
}

    


B_deal_verbose =->(with, user = $userTo){%{
#{B_deal[$lg] + "#{("#" + $deal.hash_name) if !$deal.hash_name.nil? }" + "#{with == 'with_custumer' ? B_with_custumer[$lg] : B_with_seller[$lg]}"}
#{B_user_info.call(user)}
#{B_deal_info.call($deal)}
#{B_deal_status.call}
}}

B_deal_canceled_or_finished = ->{
%{#{B_deal[$lg]} ##{$deal.hash_name}

#{B_seller[$lg]}
#{B_user_info.call($seller)}

#{B_custumer[$lg]}
#{B_user_info.call($custumer)}

#{B_deal_info.call($deal)}
#{B_deal_status.call}
}}



###########################################
B_userTo_info = ->{
%{<b>#{B_user[$lg]}</b>
#{B_user_info.call($userTo)}
<b>#{B_deals_how_seller[$lg]}</b>
<b>#{B_deals_how_custumer[$lg]}</b>
<b>#{B_dusputs[$lg]}</b>
<b>#{B_comments[$lg]}</b>

<b>#{B_rating[$lg]}</b> 5/5}}

B_confirm_deal = ->(with){
%{#{B_deal[$lg] + (with == 'with_custumer' ? B_with_custumer[$lg] : B_with_seller[$lg])}
#{B_user_info.call($userTo)}
#{B_deal_info.call($user)}}}

B_request_deal_self = ->{
  return "–ó–∞–ø—Ä–æ—Å –Ω–∞ —Å–¥–µ–ª–∫y ##{$deal.hash_name} —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω, –æ–∂–∏–¥–∞–π—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è"       if $lg == Ru
  return "Request to deal ##{ $deal.hash_name} sent successfully, please wait for confirmation" if $lg == En
}

B_request_deal_to_userTo = ->(action){
%{#{B_offer[$lg]} #{action} #{B_from[$lg]}
#{B_user_info.call($user)}
#{B_deal_hash.call}
#{B_deal_info.call($deal)}}}

B_reject_deal_userTo = ->{
%{#{B_deal[$lg]} ##{$deal.hash_name}
<b>#{B_user[$lg]}</b>
#{B_user_info.call($user)} 
#{B_reject_deal[$lg]}}}

B_request_deal_to_custumer = ->{
%{#{B_seller[$lg]}
#{B_user_info.call($user)}
#{B_accessed_by_seller[$lg]}}}

B_success_notify = {
  Ru=>"–ü—Ä–∏–Ω—è–ª —Å–¥–µ–ª–∫—É, —Å—Ä–µ–¥—Å—Ç–≤–∞ –∑–∞–º–æ—Ä–æ–∂–µ–Ω—ã –Ω–∞ —Å—á–µ—Ç—É –≥–∞—Ä–∞–Ω—Ç–∞, –≤—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–¥–∞—Ç—å —Ç–æ–≤–∞—Ä/–æ–∫–∞–∑–∞—Ç—å —É—Å–ª—É–≥—É.\n–ó–∞–≤–µ—Ä—à–∏—Ç—å —Å–¥–µ–ª–∫—É –º–æ–∂–µ—Ç –ø–æ–∫—É–ø–∞—Ç–µ–ª—å. –ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫ —Å–ø–æ—Ä, —Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ –≤—ã–∑–≤–∞—Ç—å –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞, –ø–µ—Ä–µ–π–¥—è –≤ —Ä–∞–∑–¥–µ–ª '–°–¥–µ–ª–∫–∏'.",
  En=>"I accepted the deal, the funds are frozen on the account of the guarantor, you can transfer the goods / provide the service.\nThe buyer can complete the transaction. If you have a dispute, you can call a moderator by going to the 'Deals' section."
}

B_notifi_to_seller_success_payed = ->{
%{#{B_deal[$lg]} ##{$deal.hash_name}
#{B_custumer[$lg]}
#{B_user_info.call($user)}
#{B_success_notify[$lg]}}}

B_notify_to_custumer_success_payed = {
  Ru=>'–°—Ä–µ–¥—Å—Ç–≤–∞ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –Ω–∞ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≥–∞—Ä–∞–Ω—Ç—É', 
  En=>'The funds were transferred to the safekeeping of the guarant'
}

# ü§ù–°–¥–µ–ª–∫–∏ü§ù'
B_none_active_deals = {Ru=>'–£ –≤–∞—Å –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–¥–µ–ª–æ–∫',           En=>'You don`t have any active deals'}
B_none_request_deals= {Ru=>'–£ –≤–∞—Å –Ω–µ—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ —Å–¥–µ–ª–∫–∏',       En=>'You don`t have any request deals'}
B_none_dispute_deals= {Ru=>'–£ –≤–∞—Å –Ω–µ—Ç —Å–¥–µ–ª–∫–∏ c –æ—Ç–∫—Ä—ã—Ç—ã–º —Å–ø–æ—Ä–æ–º', En=>'You do not have a deal with an open dispute'}
B_none_history_deals= {Ru=>'–£ –≤–∞—Å –Ω–µ—Ç –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö —Å–¥–µ–ª–æ–∫',        En=>'You don`t have any history deals'}


B_disput_offer = -> (seller, custumer, deal, dispute, initiator, lg){
  text = "<b>–ü—Ä–æ–¥–∞–≤–µ—Ü</b>\n"
  text << "<b>#{B_first_name[lg]}</b> #{seller.first_name } \n" if seller.first_name != '-'
  text << "<b>#{B_last_name[lg] }</b> #{seller.last_name  } \n" if seller.last_name  != '-'
  text << "<b>#{B_username[lg]  }</b> @#{seller.username  } \n" if seller.username   != '-'
  text << "<b>#{B_user_id[lg]   }</b> #{seller.telegram_id}\n"
  text << "\n"
  text << "<b>–ü–æ–∫—É–ø–∞—Ç–µ–ª—å</b>\n"
  text << "<b>#{B_first_name[lg]}</b> #{custumer.first_name } \n" if custumer.first_name != '-'
  text << "<b>#{B_last_name[lg] }</b> #{custumer.last_name  } \n" if custumer.last_name  != '-'
  text << "<b>#{B_username[lg]  }</b> @#{custumer.username  } \n" if custumer.username   != '-'
  text << "<b>#{B_user_id[lg]   }</b> #{custumer.telegram_id}\n"  
  text << "\n"
  text << "<b>#{B_deal[lg]}</b> ##{deal.hash_name}\n"
  text << "<b>#{B_conditions[lg]}</b>\n"
  text << "#{deal.conditions}\n"
  text << "<b>#{B_amount_deal[lg]}</b> #{deal.amount}\n"
  text << "<b>#{B_comission[lg]}</b> 999\n"
  text << "<b>#{B_amount_result[lg]}</b> 999\n"
  text << "\n"
  text << "#{B_opened_by[lg]} <b>#{initiator}</b>\n"
  text << "#{dispute.content}"
  text 
}
B_dispute_comment = -> (dispute){
  desision = dispute.dispute_lost
  text = "\n"
  case desision
  when 'seller_lost'
    text += "–≤—ã–π–≥—Ä–∞–ª –ü–æ–∫—É–ø–∞—Ç–µ–ª—å —Å—Ä–µ–¥—Å—Ç–≤–∞ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –ü—Ä–æ–¥–∞–≤—Ü—É"
  when 'custumer_lost'
    text += "–≤—ã–π–≥—Ä–∞–ª –ü—Ä–æ–¥–∞–≤–µ—Ü —Å—Ä–µ–¥—Å—Ç–≤–∞ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –ü–æ–∫—É–ø–∞—Ç–µ–ª—é"
  when 'all_lost'
    text += "–ø—Ä–æ–∏–≥—Ä–∞–ª–∏ –∏ –ü–æ–∫—É–ø–∞—Ç–µ–ª—å –∏ –ü—Ä–æ–¥–∞–≤–µ—Ü –∏–∑-–∑–∞ –Ω–∞—Ä—É—à–µ–Ω–∏—è —Å—Ä–µ–¥—Å—Ç–≤–∞ –ø–µ—Ä–µ—Ö–æ–¥—è—Ç –≤ –ø–æ–ª—å–∑—É –ì–∞—Ä–∞–Ω—Ç—É"
  end
    text += "\n –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞ @#{dispute.moderator.username} :\n #{dispute.comment_by_moderator}"
}

# üë®‚Äçüíº–ü—Ä–æ—Ñ–∏–ª—åüë®‚Äçüíº
B_empty_wallet = {Ru=>'–ö–æ—à–µ–ª—ë–∫ –ø—É—Å—Ç',    En=>'Wallet is empty'}
B_wallet       = {Ru=>'–£ –≤–∞—Å –≤ –∫–æ—à–µ–ª—å–∫–µ',En=>'In your wallet'}

B_view_wallet = ->{
wallet_content = B_wallet[$lg] + "\n\n"
wallet =  $user.wallet
currencies = $user.wallet.keys
currencies.each do |currency|
  amount = wallet[currency]
  wallet_content << "#{currency} --- #{amount}\n"
end
wallet_content
}